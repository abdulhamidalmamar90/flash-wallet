# FLASH | Futuristic Wallet - Technical Specification & Blueprint

هذا الملف هو الوثيقة الرسمية والموسعة لمواصفات مشروع محفظة FLASH. تم تصميمه ليكون "Blueprint" كامل يمكن استخدامه كمرجع تقني أو كـ Prompt لبناء التطبيق على منصات أخرى مثل Flutter.

## 1. الهوية البصرية والنمط التصميمي (Visual Identity)
- **المفهوم العام:** Futuristic High-End Fintech (Fintech مستقبلي فاخر).
- **لوحة الألوان (HSL):**
  - **الأساسي (Gold):** `hsl(46 65% 52%)` - يرمز للفخامة والقيمة.
  - **الثانوي (Cyan/Ice):** `hsl(184 100% 50%)` - يرمز للتكنولوجيا والسرعة.
  - **الخلفية (Deep Black):** `hsl(240 10% 4%)` - أسود كربوني مع تدرجات بسيطة.
- **الخطوط (Typography):**
  - العناوين والعناصر الرقمية: **Orbitron** (يعطي طابعاً تقنياً مستقبلياً).
  - النصوص العادية والبيانات: **Inter** (لضمان الوضوح التام).
  - النصوص العربية: **Noto Sans Arabic** (بوزن عريض للعناوين).
- **التأثيرات البصرية:**
  - **Glassmorphism:** بطاقات شفافة بخلفية ضبابية (Backdrop Blur).
  - **Neon Glow:** توهج خفيف حول الأزرار والحدود (Cyan Glow & Gold Glow).
  - **Grid Overlay:** طبقة شبكية خفيفة جداً في الخلفية تعطي إحساساً بالنظام الرقمي.

## 2. هيكل قاعدة البيانات (Firestore Architecture)
يتم تقسيم البيانات إلى ثلاث مسارات رئيسية:

### أ. مجموعة المستخدمين (`/users/{userId}`)
- `username`: اسم المستخدم الفريد.
- `email`: البريد الإلكتروني.
- `phone`: رقم الهاتف (يتضمن كود الدولة).
- `customId`: معرف المحفظة الفريد (تنسيق: حرف كبير + 12 رقم عشوائي، مثال: `F123456789012`).
- `balance`: رقم عشري (يبدأ بـ 0.00).
- `role`: نوع الحساب ("user" أو "admin").
- `verified`: حالة توثيق الحساب (Boolean).
- `language`: اللغة المفضلة ("ar" أو "en").
- `createdAt`: تاريخ إنشاء الحساب (ISO String).

### ب. سجل العمليات الخاص (`/users/{userId}/transactions/{txId}`)
- `type`: نوع العملية ("send", "receive", "withdraw", "purchase").
- `amount`: المبلغ.
- `recipient`: اسم المستلم (في حالة التحويل).
- `service`: اسم الخدمة (في حالة الشراء من المتجر).
- `status`: حالة العملية ("completed", "pending", "rejected").
- `date`: تاريخ العملية.

### ج. طلبات السحب العالمية (`/withdrawals/{withdrawalId}`)
- تستخدم لمراقبة الإدمن لطلبات السحب من كافة المستخدمين.
- تتضمن: `userId`, `username`, `amount`, `type` (بنكي أو كريبتو), `details` (بيانات التحويل), `status`.

## 3. المنطق البرمجي والعمليات (Core Business Logic)
- **توليد المعرف (Identity Generation):** عند التسجيل، يتم توليد `customId` برمجياً وضمان تخزينه كمعرف رسمي للمستقبل.
- **نظام التحويل (P2P Transfer):** يتم عبر عملية ذرية (Firestore Transaction). يخصم من المرسل، يضيف للمستقبل، ويسجل عملية في كلا الحسابين.
- **نظام السحب (Withdrawal Workflow):**
  1. يطلب المستخدم سحب مبلغ.
  2. يتم خصم المبلغ فوراً من الرصيد لضمان عدم تكرار السحب.
  3. تنشأ عملية بحالة "Pending" وتظهر في لوحة المسؤول.
  4. في حال الرفض، يتم إعادة المبلغ لرصيد المستخدم تلقائياً.
- **نظام المتجر (Marketplace Logic):** شراء البطاقات يتم بخصم مباشر من الرصيد وتسجيل العملية كـ "Purchase".

## 4. خريطة الصفحات والمكونات (App Map)
- **صفحة الترحيب/الدخول:** خلفية متحركة، دعم البريد و Google.
- **صفحة التسجيل:** قائمة منسدلة للدول مع الأكواد والأعلام، جمع بيانات الهاتف والاسم.
- **لوحة التحكم (Dashboard):**
  - عرض الرصيد بشكل ضخم وفاخر.
  - أزرار سريعة (إرسال، سحب، خدمات).
  - سجل آخر 10 عمليات.
  - نافذة QR Code تعرض معرف المحفظة.
- **صفحة التحويل:** واجهة بسيطة لإدخال اسم المستخدم والمبلغ.
- **صفحة السحب:** تبويبات بين "سحب بنكي" و "سحب كريبتو".
- **سوق الخدمات (Marketplace):** عرض بطاقات الألعاب (PUBG, Google Play) بأسلوب الشبكة (Grid).
- **لوحة المسؤول (Admin Command):** واجهة خاصة لمراجعة طلبات السحب والموافقة عليها.

## 5. المواصفات التقنية الإضافية
- **الاستجابة:** التطبيق Mobile-First بالكامل.
- **الوضع:** يدعم الوضع المظلم (Dark Mode) فقط كخيار افتراضي وثابت لتعزيز الطابع المستقبلي.
- **الوصول:** PWA (Progressive Web App) يدعم التثبيت على الشاشة الرئيسية للهواتف.
